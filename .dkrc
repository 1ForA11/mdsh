#!/usr/bin/env bash
# ---
# Add your own commands, functions, and variables here.  Define defaults first,
# then `import:` the desired devkit modules, and then define any overrides to
# the devkit defaults.
# ---

# Available modules (uncomment to use):

import: dk.cram                  # run tests using the "cram" functional test tool
import: dk.entr-watch            # watch files and re-run tests or other commands
import: dk.shell-console         # make the "console" command enter a subshell

# Define overrides, new commands, functions, etc. here:

dk.build() {
    dk test || abort "tests failed; not building" $?
    require realpaths basher install bashup/realpaths
    REPLY=$(bin/mdsh --compile mdsh.md) || abort "compile failed with $?" $?
    echo "$REPLY" >bin/mdsh
}
